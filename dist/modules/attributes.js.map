{"version":3,"file":null,"sources":["../../src/modules/attributes.ts"],"sourcesContent":["import { VNode, Module } from '../interfaces'\n\nconst booleanAttrs = [\n  'allowfullscreen', 'async', 'autofocus', 'autoplay', 'checked', 'compact', 'controls', 'declare',\n  'default', 'defaultchecked', 'defaultmuted', 'defaultselected', 'defer', 'disabled', 'draggable',\n  'enabled', 'formnovalidate', 'hidden', 'indeterminate', 'inert', 'ismap', 'itemscope', 'loop', 'multiple',\n  'muted', 'nohref', 'noresize', 'noshade', 'novalidate', 'nowrap', 'open', 'pauseonexit', 'readonly',\n  'required', 'reversed', 'scoped', 'seamless', 'selected', 'sortable', 'spellcheck', 'translate',\n  'truespeed', 'typemustmatch', 'visible'\n ]\n\nconst booleanAttrsDict: any = {}\n\nfor (let i = 0, len = booleanAttrs.length; i < len; i++) {\n  booleanAttrsDict[booleanAttrs[i]] = true\n}\n\nfunction updateAttrs(oldVnode: VNode, vnode: VNode) {\n  let key: any\n  let cur: any\n  let old: any\n  let elm = vnode.elm as HTMLElement\n  let oldAttrs = oldVnode.data && oldVnode.data.attrs || {}\n  let attrs = vnode.data && vnode.data.attrs || {}\n\n  // update modified attributes, add new attributes\n  for (key in attrs) {\n    cur = attrs[key]\n    old = oldAttrs[key]\n    if (old !== cur) {\n      // TODO: add support to namespaced attributes (setAttributeNS)\n      if (!cur && booleanAttrsDict[key]) {\n        (<HTMLElement> elm).removeAttribute(key)\n      } else {\n        (<HTMLElement> elm).setAttribute(key, cur)\n      }\n    }\n  }\n  //remove removed attributes\n  for (key in oldAttrs) {\n    if (!(key in attrs)) {\n      (<HTMLElement> elm).removeAttribute(key)\n    }\n  }\n}\n\nconst AttrsModule: Module = {\n  update: updateAttrs,\n  create: updateAttrs,\n}\n\nexport default AttrsModule\n"],"names":[],"mappings":";;;;;;IAEA,IAAM,YAAY,GAAG;QACnB,iBAAiB,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS;QAChG,SAAS,EAAE,gBAAgB,EAAE,cAAc,EAAE,iBAAiB,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW;QAChG,SAAS,EAAE,gBAAgB,EAAE,QAAQ,EAAE,eAAe,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,UAAU;QACzG,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE,aAAa,EAAE,UAAU;QACnG,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAE,WAAW;QAC/F,WAAW,EAAE,eAAe,EAAE,SAAS;KACvC,CAAA;AAEF,IAAA,IAAM,gBAAgB,GAAQ,EAAE,CAAA;AAEhC,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;QACvD,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;AAC1C,IAAA,CAAC;AAED,IAAA,qBAAqB,QAAe,EAAE,KAAY;QAChD,IAAI,GAAQ,CAAA;QACZ,IAAI,GAAQ,CAAA;QACZ,IAAI,GAAQ,CAAA;QACZ,IAAI,GAAG,GAAG,KAAK,CAAC,GAAkB,CAAA;QAClC,IAAI,QAAQ,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAA;QACzD,IAAI,KAAK,GAAG,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAA;;QAGhD,KAAK,GAAG,IAAI,KAAK,EAAE;YACjB,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAA;YAChB,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;YACnB,IAAI,GAAG,KAAK,GAAG,EAAE;;gBAEf,IAAI,CAAC,GAAG,IAAI,gBAAgB,CAAC,GAAG,CAAC,EAAE;oBAClB,GAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAA;iBACzC;qBAAM;oBACU,GAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;iBAC3C;aACF;SACF;;QAED,KAAK,GAAG,IAAI,QAAQ,EAAE;YACpB,IAAI,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,EAAE;gBACJ,GAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAA;aACzC;SACF;AACH,IAAA,CAAC;AAED,IAAA,IAAM,WAAW,GAAW;QAC1B,MAAM,EAAE,WAAW;QACnB,MAAM,EAAE,WAAW;KACpB,CAAA,AAED;;;;"}