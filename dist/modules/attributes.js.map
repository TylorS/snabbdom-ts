{"version":3,"file":null,"sources":["../../src/modules/attributes.ts"],"sourcesContent":["import { VNode, Module } from '../interfaces'\n\nconst booleanAttrs = [\n  'allowfullscreen', 'async', 'autofocus', 'autoplay', 'checked', 'compact', 'controls', 'declare',\n  'default', 'defaultchecked', 'defaultmuted', 'defaultselected', 'defer', 'disabled', 'draggable',\n  'enabled', 'formnovalidate', 'hidden', 'indeterminate', 'inert', 'ismap', 'itemscope', 'loop', 'multiple',\n  'muted', 'nohref', 'noresize', 'noshade', 'novalidate', 'nowrap', 'open', 'pauseonexit', 'readonly',\n  'required', 'reversed', 'scoped', 'seamless', 'selected', 'sortable', 'spellcheck', 'translate',\n  'truespeed', 'typemustmatch', 'visible'\n ]\n\nconst booleanAttrsDict: any = {}\n\nfor (let i = 0, len = booleanAttrs.length; i < len; i++) {\n  booleanAttrsDict[booleanAttrs[i]] = true\n}\n\nfunction updateAttrs(oldVnode: VNode, vnode: VNode) {\n  let key: any\n  let cur: any\n  let old: any\n  let elm = vnode.elm as HTMLElement\n  let oldAttrs = oldVnode.data && oldVnode.data.attrs || {}\n  let attrs = vnode.data && vnode.data.attrs || {}\n\n  // update modified attributes, add new attributes\n  for (key in attrs) {\n    cur = attrs[key]\n    old = oldAttrs[key]\n    if (old !== cur) {\n      // TODO: add support to namespaced attributes (setAttributeNS)\n      if (!cur && booleanAttrsDict[key]) {\n        (<HTMLElement> elm).removeAttribute(key)\n      } else {\n        (<HTMLElement> elm).setAttribute(key, cur)\n      }\n    }\n  }\n  //remove removed attributes\n  for (key in oldAttrs) {\n    if (!(key in attrs)) {\n      (<HTMLElement> elm).removeAttribute(key)\n    }\n  }\n}\n\nconst AttrsModule: Module = {\n  update: updateAttrs,\n  create: updateAttrs,\n}\n\nexport default AttrsModule\n"],"names":[],"mappings":";;;;;;AAEA,IAAM,YAAY,GAAG;IACnB,iBAAiB,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS;IAChG,SAAS,EAAE,gBAAgB,EAAE,cAAc,EAAE,iBAAiB,EAAE,OAAO,EAAE,UAAU,EAAE,WAAW;IAChG,SAAS,EAAE,gBAAgB,EAAE,QAAQ,EAAE,eAAe,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,UAAU;IACzG,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE,aAAa,EAAE,UAAU;IACnG,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAE,WAAW;IAC/F,WAAW,EAAE,eAAe,EAAE,SAAS;CACvC,CAAA;AAEF,IAAM,gBAAgB,GAAQ,EAAE,CAAA;AAEhC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;IACvD,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;CACzC;AAED,qBAAqB,QAAe,EAAE,KAAY;IAChD,IAAI,GAAQ,CAAA;IACZ,IAAI,GAAQ,CAAA;IACZ,IAAI,GAAQ,CAAA;IACZ,IAAI,GAAG,GAAG,KAAK,CAAC,GAAkB,CAAA;IAClC,IAAI,QAAQ,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAA;IACzD,IAAI,KAAK,GAAG,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAA;;IAGhD,KAAK,GAAG,IAAI,KAAK,EAAE;QACjB,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAA;QAChB,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;QACnB,IAAI,GAAG,KAAK,GAAG,EAAE;;YAEf,IAAI,CAAC,GAAG,IAAI,gBAAgB,CAAC,GAAG,CAAC,EAAE;gBAClB,GAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAA;aACzC;iBAAM;gBACU,GAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;aAC3C;SACF;KACF;;IAED,KAAK,GAAG,IAAI,QAAQ,EAAE;QACpB,IAAI,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,EAAE;YACJ,GAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAA;SACzC;KACF;CACF;AAED,IAAM,WAAW,GAAW;IAC1B,MAAM,EAAE,WAAW;IACnB,MAAM,EAAE,WAAW;CACpB,CAAA,AAED;;;;"}