!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("hero",e):t.hero=e()}(this,function(){"use strict";function t(t,e,n){p(function(){t[e]=n})}function e(t){var e=null;if(document.createRange){var n=document.createRange();n.selectNodeContents(t),n.getBoundingClientRect&&(e=n.getBoundingClientRect())}return e}function n(t,e,n){if(t&&e){var i=e.left+e.width/2-n.left,o=e.top+e.height/2-n.top;return i+"px "+o+"px"}return"0 0"}function i(t,e){return t&&e?t.left+t.width/2-(e.left+e.width/2):0}function o(t,e){return t&&e?t.top+t.height/2-(e.top+e.height/2):0}function r(t){return 1===t.childNodes.length&&3===t.childNodes[0].nodeType}function d(){u={},l=[]}function a(t,e){var n=e.data&&e.data.hero;n&&n.id&&(l.push(n.id),l.push(e))}function s(t){var n=t.data&&t.data.hero;if(n&&n.id){var i=t.elm;t.isTextNode=r(i),t.boundingRect=i.getBoundingClientRect(),t.textRect=t.isTextNode?e(i.childNodes[0]):null;var o=window.getComputedStyle(i);t.savedStyle=JSON.parse(JSON.stringify(o)),u[n.id]=t}}function f(){var d,a,s,f,c,p,h,m,g,y,x,v,w,b,N,R,C,S,T;for(d=0;d<l.length;d+=2)if(a=l[d],s=l[d+1].elm,f=u[a]){C=f.isTextNode&&r(s),b=s.style,R=window.getComputedStyle(s),c=f.elm,N=c.style,g=s.getBoundingClientRect(),m=f.boundingRect,C?(S=e(s.childNodes[0]),T=f.textRect,y=i(T,S),x=o(T,S)):(y=m.left-g.left,x=m.top-g.top),p=g.height/Math.max(m.height,1),h=C?p:g.width/Math.max(m.width,1),v=b.transform,w=b.transition,"inline"===R.display&&(b.display="inline-block"),b.transition=w+"transform 0s",b.transformOrigin=n(C,S,g),b.opacity="0",b.transform=v+"translate("+y+"px, "+x+"px) scale("+1/h+", "+1/p+")",t(b,"transition",w),t(b,"transform",v),t(b,"opacity","1");for(var B in f.savedStyle)if("number"==typeof B&&parseInt(B)!==B){var O="ms"===B.substring(0,2),k="moz"===B.substring(0,3),J="webkit"===B.substring(0,6);O||k||J||(N[B]=f.savedStyle[B])}N.position="absolute",N.top=m.top+"px",N.left=m.left+"px",N.width=m.width+"px",N.height=m.height+"px",N.margin=0,N.transformOrigin=n(C,T,m),N.transform="",N.opacity="1",document.body.appendChild(c),t(N,"transform","translate("+-y+"px, "+-x+"px) scale("+h+", "+p+")"),t(N,"opacity","0"),c.addEventListener("transitionend",function(t){"transform"===t.propertyName&&document.body.removeChild(t.target)})}u={},l=[]}var u,l,c="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,p=function(t){c(function(){c(t)})},h={pre:d,create:a,destroy:s,post:f};return h});