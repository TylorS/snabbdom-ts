{"version":3,"file":null,"sources":["../node_modules/rollup-plugin-typescript/src/typescript-helpers.js","../src/interfaces.ts","../src/thunk.ts"],"sourcesContent":["export const __assign = Object.assign || function (target) {\n    for (var source, i = 1; i < arguments.length; i++) {\n        source = arguments[i];\n        for (var prop in source) {\n            if (Object.prototype.hasOwnProperty.call(source, prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n    return target;\n};\n\nexport function __extends(d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport function __decorate(decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __metadata(k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n}\n\nexport function __param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments)).next());\n    });\n}\n","export type PreHook = () => any\nexport type InitHook = (vNode: VNode) => any\nexport type CreateHook = (emptyVNode: VNode, vNode: VNode) => any\nexport type InsertHook = (vNode: VNode) => any\nexport type PrePatchHook = (oldVNode: VNode, vNode: VNode) => any\nexport type UpdateHook = (oldVNode: VNode, vNode: VNode) => any\nexport type PostPatchHook = (oldVNode: VNode, vNode: VNode) => any\nexport type DestroyHook = (vNode: VNode) => any\nexport type RemoveHook = (vNode: VNode, removeCallback: () => void) => any\nexport type PostHook = () => any\n\nexport interface Hooks {\n  pre?: PreHook\n  init?: InitHook\n  create?: CreateHook\n  insert?: InsertHook\n  prepatch?: PrePatchHook\n  update?: UpdateHook\n  postpatch?: PostPatchHook\n  destroy?: DestroyHook\n  remove?: RemoveHook\n  post?: PostHook\n}\n\nexport interface Module {\n  pre?: PreHook\n  create?: CreateHook\n  update?: UpdateHook\n  destroy?: DestroyHook\n  remove?: RemoveHook\n  post?: PostHook\n}\n\nexport interface SnabbdomAPI<A, B, C> {\n  createElement(tagName: string): A\n  createElementNS(namespaceURI: string, qualifiedName: string): A\n  createTextNode(text: string): B\n  insertBefore(parentNode: A | B, newNode: A | B, referenceNode: A | B): void\n  removeChild(node: A | B, child: A | B): void\n  appendChild(node: A, child: A | B): void\n  parentNode(node: A | B): A | B\n  nextSibling(node: A | B): A | C\n  tagName(node: A): string\n  setTextContent(node: A | B, text: string): void\n}\n\nexport interface VNodeData {\n  // modules - use any because Object type is useless\n  props?: any\n  attrs?: any\n  class?: any\n  style?: any\n  dataset?: any\n  on?: any\n  hero?: any\n  // end of modules\n  hook?: Hooks\n  key?: string | number\n  ns?: string; // for SVGs\n  fn?: () => VNode // for thunks\n  args?: Array<any> // for thunks\n  attachData?: any // for attachTo()\n  // Cycle.js only\n  isolate?: string\n  static?: boolean\n}\n\nexport class VNode {\n  public sel: string | undefined\n  public data: VNodeData | undefined\n  public children: Array<VNode | string | null> | undefined\n  public elm: HTMLElement | Text | undefined\n  public text: string | undefined\n  public key: string | number | undefined\n  constructor(selector: string | undefined, data: VNodeData | undefined,\n              children: Array<VNode | string | null> | undefined, text: string | undefined,\n              elm: HTMLElement | Text | undefined, key: string | number | undefined) {\n    this.sel = selector\n    this.data = data\n    this.children = children\n    this.text = text\n    this.elm = elm\n    this.key = key\n  }\n\n  static create(selector: string | undefined, data: VNodeData | undefined,\n                children: Array<VNode | string | null> | undefined, text: string | undefined,\n                elm: HTMLElement | Text | undefined, key: string | number | undefined) {\n    return new VNode(selector, data, children, text, elm, key)\n  }\n\n  static createTextVNode(text: string) {\n    return new VNode(undefined, undefined, undefined, text, undefined, undefined)\n  }\n}\n\nexport interface ThunkData extends VNodeData {\n  fn: () => VNode\n  args: any[]\n}\n\nexport class Thunk extends VNode {\n  public data: ThunkData\n  constructor(selector: string | undefined, data: ThunkData,\n              children: Array<VNode | string | null> | undefined, text: string | undefined,\n              elm: HTMLElement | Text | undefined, key: string | number | undefined) {\n    super(selector, data, children, text, elm, key)\n  }\n\n  static create(selector: string | undefined, data: ThunkData,\n                children: Array<VNode | string | null> | undefined, text: string | undefined,\n                elm: HTMLElement | Text | undefined, key: string | number | undefined) {\n    return new Thunk(selector, data, children, text, elm, key)\n  }\n}\n\n/* tslint:disable:max-line-length */\nexport interface ThunkFn {\n  <A>(selector: string, key: string | number, render: (state1?: A) => VNode, state: A): Thunk\n  <A, B>(selector: string, key: string | number, render: (state1?: A, state2?: B) => VNode, state: A, state2: B): Thunk\n  <A, B, C>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C) => VNode, state: A, state2: B, state3: C): Thunk\n  <A, B, C, D>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C, state4?: D) => VNode, state: A, state2: B, state3: C, state4: D): Thunk\n  <A, B, C, D, E>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C, state4?: D, state5?: E) => VNode, state: A, state2: B, state3: C, state4: D, state5?: E): Thunk\n  <A, B, C, D, E, F>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C, state4?: D, state5?: E, state6?: F) => VNode, state: A, state2: B, state3: C, state4: D, state5: E, state6: F): Thunk\n  <A, B, C, D, E, F, G>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C, state4?: D, state5?: E, state6?: F, state7?: G) => VNode, state: A, state2: B, state3: C, state4: D, state5: E, state6: F, state7: G): Thunk\n  <A, B, C, D, E, F, G, H>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C, state4?: D, state5?: E, state6?: F, state7?: G, state8?: H) => VNode, state: A, state2: B, state3: C, state4: D, state5: E, state6: F, state7: G, state8: H): Thunk\n  <A, B, C, D, E, F, G, H, I>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C, state4?: D, state5?: E, state6?: F, state7?: G, state8?: H, state9?: I) => VNode, state: A, state2: B, state3: C, state4: D, state5: E, state6: F, state7: G, state8: H, state9: I): Thunk\n  <A, B, C, D, E, F, G, H, I, J>(selector: string, key: string | number, render: (state1?: A, state2?: B, state3?: C, state4?: D, state5?: E, state6?: F, state7?: G, state8?: H, state9?: I, state10?: J) => VNode, state: A, state2: B, state3: C, state4: D, state5: E, state6: F, state7: G, state8: H, state9: I, state10: J): Thunk\n  (selector: string, key: string | number, render: (...state: any[]) => VNode, ...state: any[]): Thunk\n}\n/* tslint:enable:max-line-length */\n","import { VNode, Thunk, VNodeData, ThunkData, ThunkFn } from './interfaces'\n\nfunction copyToThunk (vNode: VNode, thunk: Thunk): void {\n  thunk.elm = vNode.elm\n  if (!vNode.data) {\n    vNode.data = {}\n  }\n  vNode.data.fn = (thunk.data as VNodeData).fn\n  vNode.data.args = thunk.data.args\n  thunk.data = vNode.data as ThunkData\n  thunk.children = vNode.children\n  thunk.text = vNode.text\n  thunk.elm = vNode.elm\n}\n\nfunction init (thunk: Thunk) {\n  const cur = thunk.data;\n  const vNode = cur.fn.apply(undefined, cur.args);\n  copyToThunk(vNode, thunk);\n}\n\nfunction prepatch (oldVnode: VNode, thunk: Thunk): void {\n  let old = oldVnode.data\n  let cur = thunk.data\n  let oldArgs = old ? old.args : []\n  let args = cur.args\n  if (old && old.fn !== cur.fn || oldArgs && oldArgs.length !== args.length) {\n    copyToThunk(cur.fn.apply(undefined, args), thunk)\n  }\n  for (let i = 0; i < args.length; ++i) {\n    if (oldArgs && oldArgs[i] !== args[i]) {\n      copyToThunk(cur.fn.apply(undefined, args), thunk)\n      return;\n    }\n  }\n  copyToThunk(oldVnode, thunk);\n}\n\nconst thunk: ThunkFn = <ThunkFn>function thunk(selector: string,\n                                               key: string | number,\n                                               render: (...state: any[]) => VNode,\n                                               ...state: any[]): Thunk {\n  return Thunk.create(selector,\n    {\n      key,\n      hook: { init, prepatch },\n      fn: render,\n      args: state\n    },\n    undefined,\n    undefined,\n    undefined,\n    key\n  )\n}\n\nexport default thunk\n"],"names":[],"mappings":"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"}