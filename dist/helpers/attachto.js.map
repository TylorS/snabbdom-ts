{"version":3,"file":null,"sources":["../../src/helpers/attachto.ts"],"sourcesContent":["import { VNode, VNodeData } from '../interfaces'\n\ninterface AttachData extends VNodeData {\n  attachData: any\n}\n\ninterface AttachVNode extends VNode {\n  elm: HTMLElement\n  data: AttachData\n}\n\nfunction pre(vnode: AttachVNode, newVnode: AttachVNode) {\n  const attachData = vnode.data.attachData\n  // Copy created placeholder and real element from old vnode\n  newVnode.data.attachData.placeholder = attachData.placeholder\n  newVnode.data.attachData.real = attachData.real\n  // Mount real element in vnode so the patch process operates on it\n  vnode.elm = vnode.data.attachData.real\n}\n\nfunction post(_: any, vnode: AttachVNode) {\n  // Mount dummy placeholder in vnode so potential reorders use it\n  vnode.elm = vnode.data.attachData.placeholder\n}\n\nfunction destroy(vnode: AttachVNode) {\n  // Remove placeholder\n  vnode.elm.parentElement.removeChild(vnode.elm)\n  // Remove real element from where it was inserted\n  vnode.elm = vnode.data.attachData.real\n}\n\nfunction create(_: any, vnode: AttachVNode) {\n  const real = vnode.elm, attachData = vnode.data.attachData\n  const placeholder = document.createElement('span')\n  // Replace actual element with dummy placeholder\n  // Snabbdom will then insert placeholder instead\n  vnode.elm = placeholder\n  attachData.target.appendChild(real)\n  attachData.real = real\n  attachData.placeholder = placeholder\n}\n\nexport default function attachTo(target: Element, vNode: VNode) {\n  if (vNode.data === undefined) vNode.data = {}\n  if (vNode.data.hook === undefined) vNode.data.hook = {}\n  const data = vNode.data\n  const hook = vNode.data.hook\n  data.attachData = {target: target, placeholder: undefined, real: undefined}\n  hook.create = create\n  hook.prepatch = pre\n  hook.postpatch = post\n  hook.destroy = destroy\n  return vNode\n}\n"],"names":[],"mappings":";;;;;;IAWA,aAAa,KAAkB,EAAE,QAAqB;QACpD,IAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAA;;QAExC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,GAAG,UAAU,CAAC,WAAW,CAAA;QAC7D,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAA;;QAE/C,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAA;AACxC,IAAA,CAAC;AAED,IAAA,cAAc,CAAM,EAAE,KAAkB;;QAEtC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAA;AAC/C,IAAA,CAAC;AAED,IAAA,iBAAiB,KAAkB;;QAEjC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;;QAE9C,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAA;AACxC,IAAA,CAAC;AAED,IAAA,gBAAgB,CAAM,EAAE,KAAkB;QACxC,IAAM,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAA;QAC1D,IAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;;;QAGlD,KAAK,CAAC,GAAG,GAAG,WAAW,CAAA;QACvB,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;QACnC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAA;QACtB,UAAU,CAAC,WAAW,GAAG,WAAW,CAAA;AACtC,IAAA,CAAC;AAED,sBAAiC,MAAe,EAAE,KAAY;QAC5D,IAAI,KAAK,CAAC,IAAI,KAAK,SAAS;YAAE,KAAK,CAAC,IAAI,GAAG,EAAE,CAAA;QAC7C,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS;YAAE,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAA;QACvD,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAA;QACvB,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAA;QAC5B,IAAI,CAAC,UAAU,GAAG,EAAC,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAC,CAAA;QAC3E,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAA;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;QACrB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,OAAO,KAAK,CAAA;AACd,IAAA,CAAC;;;;"}