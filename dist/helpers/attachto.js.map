{"version":3,"file":null,"sources":["../../src/helpers/attachto.ts"],"sourcesContent":["import { VNode, VNodeData } from '../interfaces'\n\ninterface AttachData extends VNodeData {\n  attachData: any\n}\n\ninterface AttachVNode extends VNode {\n  elm: HTMLElement\n  data: AttachData\n}\n\nfunction pre(vnode: AttachVNode, newVnode: AttachVNode) {\n  const attachData = vnode.data.attachData\n  // Copy created placeholder and real element from old vnode\n  newVnode.data.attachData.placeholder = attachData.placeholder\n  newVnode.data.attachData.real = attachData.real\n  // Mount real element in vnode so the patch process operates on it\n  vnode.elm = vnode.data.attachData.real\n}\n\nfunction post(_: any, vnode: AttachVNode) {\n  // Mount dummy placeholder in vnode so potential reorders use it\n  vnode.elm = vnode.data.attachData.placeholder\n}\n\nfunction destroy(vnode: AttachVNode) {\n  // Remove placeholder\n  (vnode.elm.parentElement as HTMLElement).removeChild(vnode.elm)\n  // Remove real element from where it was inserted\n  vnode.elm = vnode.data.attachData.real\n}\n\nfunction create(_: any, vnode: AttachVNode) {\n  const real = vnode.elm, attachData = vnode.data.attachData\n  const placeholder = document.createElement('span')\n  // Replace actual element with dummy placeholder\n  // Snabbdom will then insert placeholder instead\n  vnode.elm = placeholder as any as HTMLElement\n  attachData.target.appendChild(real)\n  attachData.real = real\n  attachData.placeholder = placeholder\n}\n\nexport default function attachTo(target: Element, vNode: VNode) {\n  if (vNode.data === undefined) vNode.data = {}\n  if (vNode.data.hook === undefined) vNode.data.hook = {}\n  const data = vNode.data\n  const hook = vNode.data.hook\n  data.attachData = {target: target, placeholder: undefined, real: undefined}\n  hook.create = create\n  hook.prepatch = pre\n  hook.postpatch = post\n  hook.destroy = destroy\n  return vNode\n}\n"],"names":[],"mappings":";;;;;;AAWA,aAAa,KAAkB,EAAE,QAAqB;IACpD,IAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAA;;IAExC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,GAAG,UAAU,CAAC,WAAW,CAAA;IAC7D,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,UAAU,CAAC,IAAI,CAAA;;IAE/C,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAA;CACvC;AAED,cAAc,CAAM,EAAE,KAAkB;;IAEtC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAA;CAC9C;AAED,iBAAiB,KAAkB;;IAEhC,KAAK,CAAC,GAAG,CAAC,aAA6B,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;;IAE/D,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAA;CACvC;AAED,gBAAgB,CAAM,EAAE,KAAkB;IACxC,IAAM,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAA;IAC1D,IAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;;;IAGlD,KAAK,CAAC,GAAG,GAAG,WAAiC,CAAA;IAC7C,UAAU,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAA;IACnC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAA;IACtB,UAAU,CAAC,WAAW,GAAG,WAAW,CAAA;CACrC;AAED,kBAAiC,MAAe,EAAE,KAAY;IAC5D,IAAI,KAAK,CAAC,IAAI,KAAK,SAAS;QAAE,KAAK,CAAC,IAAI,GAAG,EAAE,CAAA;IAC7C,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS;QAAE,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAA;IACvD,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAA;IACvB,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAA;IAC5B,IAAI,CAAC,UAAU,GAAG,EAAC,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAC,CAAA;IAC3E,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;IACpB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAA;IACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;IACrB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;IACtB,OAAO,KAAK,CAAA;CACb;;;;"}